<!DOCTYPE HTML>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title> Challenge ONE Alura - Cripto </title>
    <link rel="stylesheet" href="css\reset.css">
    <link rel="stylesheet" href="css\styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
</head>

<body>
    <div class="bloco"><div class="entrada">
            <header>
                <div>
                    <img src="imgs\Vector.png">
                </div>
            </header>
            <main>
                <form>
                    <textarea id="textInput" class="input-padrao" placeholder="Digite seu texto"></textarea>
                    <div id="infoBar">
                        <img src="imgs\Exclamation.svg">
                        <p id="infoText">Apenas letras minúsculas e sem acento.</p>
                    </div><div id="buttonsInput">
                        <input type="button" value="Criptografar" class="buttons" id="cripBtn">
                        <input type="button" value="Descriptografar" class="buttons" id="decrBtn" disabled>
                    </div>
                </form>
            </main>
        </div><div class="saida">
            <div id="panelOutput">
                <form>
                    <textarea id="textOutput" class="input-padrao" disabled></textarea><div id="buttonsOutput">
                        <input type="button" value="Copiar" class="buttons" id="copyBtn" disabled>
                    </div>
                </form>
            </div><div id="placeholderOutput">
                <div id="placeholderContent">
                    <img src="imgs\High quality products 1 1.png" id="placeholderImg">
                    <p id="placeholderH1">
                        Nenhuma mensagem encontrada
                    </p>
                    <p id="placeholderH2">
                        Digite um texto que você deseja criptografar ou descriptografar.
                    </p>
                </div></div></div>
    </div>
    <script>
        var regexCheck = '[a-z]*';

        function valido(texto) {

            if (texto.match(regexCheck)!=texto) {
                return false;
            } else {
                return true;
            }

        }

        const btnCripto = document.getElementById('cripBtn');

        btnCripto.addEventListener('click', criptografa);

        function criptografa() {
            var textoDecript = document.getElementById('textInput').value;

            if (valido(textoDecript)) {
            
                var novoTexto = textoDecript.replace("e", "enter").replace("i", "imes").replace("a", "ai").replace("o", "ober").replace("u", "ufat");

                document.getElementById('textOutput').value = novoTexto;

                document.getElementById("cripBtn").disabled = false;
                document.getElementById("decrBtn").disabled = true;
                document.getElementById("copyBtn").disabled = false;
                document.getElementById("placeholderOutput").style = 'z-index : -1';
            
            } else {

                document.getElementById('textInput').value = '';
                document.getElementById('infoBar').style.opacity='100%';

            }

        }

        const btnDecripto = document.getElementById('decrBtn');
        btnDecripto.addEventListener('click', decriptografa);

        function decriptografa() {
            var textoCript = document.getElementById('textInput').value;
            var novoTexto = textoCript.replace("enter", "e").replace("imes", "i").replace("ai", "a").replace("ober", "o").replace("ufat", "u");

            document.getElementById('textOutput').value = novoTexto;

            document.getElementById("cripBtn").disabled = false;
            document.getElementById("decrBtn").disabled = true;
            document.getElementById("copyBtn").disabled = true;
        }

        const btnCopy = document.getElementById('copyBtn');
        btnCopy.addEventListener('click', copia);

        function copia() {
            var textoCript = document.getElementById('textOutput').value;
            document.getElementById('textOutput').value = '';

            document.getElementById('textInput').value = textoCript;

            document.getElementById("cripBtn").disabled = true;
            document.getElementById("decrBtn").disabled = false;
            document.getElementById("copyBtn").disabled = true;
        }
        
    </script>
</body>